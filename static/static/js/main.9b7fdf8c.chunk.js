(this.webpackJsonpcloudflare_dns_configurator=this.webpackJsonpcloudflare_dns_configurator||[]).push([[0],{3:function(e,t,l){e.exports=l(9)},8:function(e,t,l){},9:function(e,t,l){"use strict";l.r(t);var n=l(0),a=l.n(n),c=l(2),r=l.n(c);l(8);const o=(e,t,l)=>{let n=`http://${window.location.host}/api`+t;const a={method:e,body:l?JSON.stringify(l):void 0,headers:{"Content-Type":"application/json"}};return new Promise((e,t)=>{fetch(n,a).then(l=>{if(l&&l.ok)try{let n=l.json();n.error?t(n):e(n)}catch(n){t(n)}else t({error:!0,message:"No response body"})}).catch(e=>t(e))})},i={display:"flex",flexDirection:"row",justifyContent:"center"},d={display:"flex",flexDirection:"column",justifyContent:"center",maxWidth:"720px",marginTop:"auto",marginBottom:"auto"},s=["type","name","content"],u=e=>{const{records:t,updateRecord:l,id:c,addRecord:r}=e,d=Object(n.useContext)(E);let[u,m]=Object(n.useState)({...t});const p=s.map(e=>a.a.createElement("dl",{key:e},a.a.createElement("dt",null,e),!0!==c?a.a.createElement("dd",null,t[e]):null,a.a.createElement("dd",null,a.a.createElement("input",{type:"text",value:u[e],onChange:t=>((e,t)=>{let{value:l}=e.target,n={...u};n[t]=l,m(n)})(t,e),style:{borderColor:!0===c||t[e]===u[e]?"inherit":"#9fc"}}))));return a.a.createElement("div",null,a.a.createElement("dl",null,p),a.a.createElement("div",{style:{...i,height:"unset",justifyContent:"space-around"}},a.a.createElement("button",{onClick:()=>{d(!0);let e=s.reduce((e,t)=>{let l={...e};return l[t]=u[t],l},{});!0===c&&(e.ttl=1),o(!0===c?"POST":"PUT",!0===c?"":`/${c}`,e).then(e=>{let{result:t}=e;!0===c?r(t):l(t),d(!1)}).catch(e=>{console.log(e),d(!1)})}},"Submit"),a.a.createElement("button",{onClick:()=>{m({...t})}},"Reset"),a.a.createElement("button",null,"Refresh")))},m=e=>{let{data:t,openUp:l,deleteRecord:n}=e;return t&&t.length?a.a.createElement("table",{style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,s.map(e=>a.a.createElement("td",{key:e},e)),a.a.createElement("td",null,"Edit"))),a.a.createElement("tbody",null,t.map(e=>a.a.createElement("tr",{key:e.id},s.map(t=>{let l=e[t],n=l.length<=32?l:l.slice(0,30)+"  ...";return a.a.createElement("td",{key:t},n)}),a.a.createElement("td",null,a.a.createElement("div",{style:i},a.a.createElement("button",{onClick:()=>l(e.id)},"View"),a.a.createElement("button",{onClick:()=>n(e.id)},"Delete"))))))):a.a.createElement("p",null,"No data available")},E=Object(n.createContext)(!1);var p=e=>{const[t,l]=Object(n.useState)(!1),[c,r]=Object(n.useState)(null),[s,p]=Object(n.useState)(1),[h,b]=Object(n.useState)(1),[y,f]=Object(n.useState)(null);let g=[];for(let n=0;n<s;n++)g.push(n+1);const v=Object(n.useCallback)(async e=>{try{l(!0);let t=`?page=${e}`,n=await o("GET",t);if(n&&n.data){let{result_info:e,result:t}=n.data;p(e.total_pages),r(t),l(!1)}else r(!1),l(!1)}catch(t){r(!1)}},[p,r,l]);Object(n.useEffect)(()=>{v(h)},[v,h]);let C=y&&a.a.createElement("button",{onClick:()=>f(null)},"Back to Record list"),k=s>1&&!y?[...g.map(e=>a.a.createElement("button",{onClick:()=>b(e)},e)),a.a.createElement("button",{onClick:()=>f(!0)},"New"),a.a.createElement("button",{onClick:()=>v(h)},"Refresh")]:null;return a.a.createElement(E.Provider,{value:l},a.a.createElement("h1",{style:{textAlign:"center"}},"Update DNS"),s>1?a.a.createElement("div",{style:{...i,alignItems:"baseline"}},a.a.createElement("span",null,"Pages: "),C,k):null,a.a.createElement("div",{style:i},a.a.createElement("div",{style:d},y?a.a.createElement(u,{records:c.find(e=>e.id===y),updateRecord:e=>{let t=[...c],l=t.findIndex(t=>t.id===e.id);t.splice(l,1,{...e}),r(t)},addRecord:e=>{r([...c,e]),f(null)},id:y}):a.a.createElement(m,{data:c,openUp:f,deleteRecord:e=>{l(!0),o("DELETE",`/${e}`).then(t=>{let n=[...c],a=n.findIndex(t=>t.id===e);n.splice(a,1),r(n),l(!1)}).catch(e=>{console.log(e),l(!1)})}}))),s>1?a.a.createElement("div",{style:{...i,alignItems:"baseline"}},a.a.createElement("span",null,"Pages: "),C,k):null,t?a.a.createElement("div",{style:{position:"fixed",top:0,bottom:0,width:"100vw",height:"100vh",backgroundColor:"#0004",display:"flex",flexDirection:"row",justifyContent:"center",alignItem:"center"}},a.a.createElement("div",{style:{margin:"auto"}},a.a.createElement("h1",null,"Fetching"))):null)};r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root"))}},[[3,1,2]]]);